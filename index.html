<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>NHANES Analysis Dashboard</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <link rel="stylesheet" type="text/css" href="static/css/styles.css">
    </head>
    <body>
        <div class="container-flex d-flex flex-column flex-md-row justify-content-between">
            <div class="row flex-grow-1 d-flex flex-column flex-md-row">
                <!-- Sidebar column -->
                <div class="col-12 d-flex flex-column col-md-3 px-0" id="sideBar">
                    <!-- Page Title -->
                    <header class="row">
                        <div class="col-12 py-1 py-md-3" id="title-div">
                            <h1 class="m-0 mb-md-1" id="title">US Food Spending</h1>
                            <p class="description d-md-none" id="page-description-mobile">NHANES Analysis</p>
                            <p class="description d-none d-md-block" id="page-description">National Health and Nutrition Examination Survey<br>2007-2008 & 2017-2018</p>
                        </div>
                        <div class="d-md-none col-12 px-0" id="mobile-buttons-div">
                            <div class="row">
                                <div class="col-4 px-0">
                                    <button class="all-buttons mobile-button active" id="instructions-button">
                                        <i class="bi bi-info-circle-fill pe-1"></i>
                                        About
                                    </button>
                                </div>
                                <div class="col-4 px-0">
                                    <button class="all-buttons mobile-button" id="filter-button">
                                        <i class="bi bi-funnel-fill pe-1"></i>
                                        Filters
                                    </button>
                                </div>
                                <div class="col-4 px-0">
                                    <button class="all-buttons mobile-button" id="plot-container-button">
                                        <i class="bi bi-bar-chart-fill pe-1"></i>
                                        Graph
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>
                    <!-- Filter container -->
                    <div class="d-flex flex-column row py-3 px-0 mobile-tab mobile-tab-inactive" id="filter-container">
                        <!-- Desktop button -->
                        <div class="d-none d-md-grid">
                            <div class="d-none col-12 px-3 pb-2" id="desktop-button-div">
                                <button class="all-buttons desktop-button about-button" id="desktop-button" onclick="aboutToggle();"><i class="bi bi-info-circle-fill pe-1"></i>About</button>
                            </div>
                        </div>
                        <!-- Year filter -->
                        <div class="col-12 px-3">
                            <h3>Year Range:</h3>
                        </div>
                        <div class="col-12 d-flex mb-3 flex-wrap" id="radio-div">
                            <label for="first-year"><input onchange="filter(this);" type="radio" name="year" id="first-year" class="ms-2 me-1" checked>2007-2008</label>
                            <label for="second-year"><input onchange="filter(this);" type="radio" name="year" id="second-year" class="ms-2 me-1">2017-2018</label>
                        </div>
                        <!-- Filters and categories -->
                        <div class="col-12 p-0" id="filter-by">
                            <div class="px-3 py-3 filter-div" id="filter-div-1">
                                <div class="align-items-baseline d-flex justify-content-between">
                                    <h3>Filter by:</h3>
                                    <div class="on-hover-parent" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="left" data-bs-html="true" data-bs-title="<b>Select a filter to show a graph.</b>">
                                        <i class="bi bi-info-square-fill icon-info"></i>
                                    </div>
                                </div>
                                <select onchange="filter(this);" class="filter current-filter" id="filter-1">
                                    <option value="default" disabled selected>Select a filter...</option>
                                    
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Plot and Instructions column -->
                <div class="col-12 col-md-9 flex-grow-1 p-0" id="plotAndInstructionsContainer">
                    <!-- Instructions -->
                    <div class="mobile-tab top-padding-custom p-3" id="instructions-container">
                        <h2 class="mb-1">Welcome to the NHANES Food Spending and Consumption Dashboard</h2>
                        <p class="mb-1">Explore and visualize data from the National Health and Nutrition Examination Survey (NHANES) related to food spending and consumption. Create bar charts by filtering the population based on demographic criteria and compare the latest data to the data collected 10 years prior.
                            Tailor your population of interest and compare data over a ten-year period.</p>
                        
                        <h2 class="mb-1">How to use this dashboard:</h2>
                            <ol class="d-none d-md-block mb-1">
                                <li>Select a filter from the dropdown menu on the sidebar. A bar chart will be displayed.</li>
                                <li>Hover over the bars to see the amount of US dollars spent a month and the percentage of total food spending. The legend under the graph shows spending types by color.</li>
                                <li>Further refine your selection by choosing a specific category within the filter and adding another demographic filter. Repeat this process as much as you want.</li>
                            </ol>
                            <ol class="d-md-none mb-1">
                                <li>Tap the Filters tab and select a filter from the dropdown menu. You will be redirected to the Graph tab where the bar chart will be displayed.</li>
                                <li>Tap on the bars to view the amount of US dollars spent a month and the percentage of total food spending. The legend under the graph shows spending types by color.</li>
                                <li>Further refine your selection by returning to the Filters tab, choosing a specific category within the filter, and then adding another demographic filter.</li>
                            </ol>
                        <h2 class="mb-1">About the app:</h2>
                        <p class="mb-1">
                            The data displayed in the visualizations was collected for the NHANES and taken from the Centers for Disease Control and Prevention (CDC) website.
                            The graphs show the data collected for the 2007-2008 and the 2017-2018 surveys.<br>
                            The word filter is a demographic variable in this app, and a category is a group or measurement of a filter.<br>
                            Each category is represented with a bar that is divided into four different segments or types of food spending. All the segments of a bar add up to 100%, hence, each segment represents only a portion of the monthly total amount of food spending in US dollars.
                        </p>
                        <h2 class="mb-1">About the legend:</h2>
                        <table>
                            <tr>
                                <td class="text-end align-top">
                                    <div class="d-inline-flex align-items-center mx-2">
                                        <div class="color" id="color-1"></div>
                                        <div class="legend-text">Groceries:</div>
                                    </div>
                                </td>
                                <td>
                                    How much money or food stamps were spent a month at supermarkets or grocery stores, excluding alcoholic beverages.<br>
                                    <span class="grayedout-text">
                                        Note: Due to the data collection process, this type of spending may include non-food items, such as cleaning or paper products, pet food or cigarettes.
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-end align-top">
                                    <div class="d-inline-flex align-items-center mx-2">
                                        <div class="color" id="color-2"></div>
                                        <div class="legend-text text-nowrap">Other stores:</div>
                                    </div>
                                </td>
                                <td>
                                    How much money was spent on food at other stores, such as convenience stores, wholesale stores, department stores, bakeries, meat markets, vegetable stands or farmerâ€™s markets.<br>
                                    <span class="grayedout-text">
                                        Note: Due to the data collection process, the spending on some of those stores could have been included either in this type of spending or as groceries.
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-end align-top">
                                    <div class="d-inline-flex align-items-center mx-2">
                                        <div class="color" id="color-3"></div>
                                        <div class="legend-text text-nowrap">Eating out:</div>
                                    </div>
                                </td>
                                <td>
                                    Text text.<br>
                                    <span class="grayedout-text">
                                        Note: notes
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-end align-top">
                                    <div class="d-inline-flex align-items-center mx-2">
                                        <div class="color" id="color-4"></div>
                                        <div class="legend-text text-nowrap">Delivery/Take-out:</div>
                                    </div>
                                </td>
                                <td>
                                    Text text.<br>
                                    <span class="grayedout-text">
                                        Note: notes
                                    </span>
                                </td>
                            </tr>
                        </table>
                        <h2>Source:</h2>
                        <p>Centers for Disease Control and Prevention (CDC)</p>
                        <ul>
                            <li><a href="https://wwwn.cdc.gov/Nchs/Nhanes/continuousnhanes/default.aspx?BeginYear=2007">NHANES 2007-2008</a></li>
                            <li><a href="https://wwwn.cdc.gov/Nchs/Nhanes/continuousnhanes/default.aspx?BeginYear=2017">NHANES 2017-2018</a></li>
                        </ul>
                        <h2>Contact us:</h2>
                        <p>This app was created by:</p>
                        <div class="d-flex flex-wrap">
                            <div class="flex-grow-1 contact-card mx-3 mb-3">
                                <p class="mb-2">Javier Robles Samar</p>
                                <div class="d-flex justify-content-center">
                                    <a class="p-2 flex-grow-1 mx-1 all-buttons" href="https://github.com/javrobs" target="_blank"><i class="bi bi-github"></i> Github</a>
                                    <a class="p-2 flex-grow-1 mx-1 all-buttons"  href="mailto:javieroblesamar@gmail.com"><i class="bi bi-envelope-fill"></i> Email</a>
                                    <a class="p-2 flex-grow-1 mx-1 all-buttons"  href="https://www.linkedin.com/in/javier-robles-samar/"><i class="bi bi-linkedin"></i> LinkedIn </a>
                                </div>
                            </div>
                            <div class="flex-grow-1 contact-card mx-3 mb-3">
                                <p class="mb-2">Daniel R. Murillo Antuna</p>
                                <div class="d-flex justify-content-center">
                                    <a class="p-2 flex-grow-1 mx-1 all-buttons" href="https://github.com/dan-murillo" target="_blank"><i class="bi bi-github"></i> Github</a>
                                    <a class="p-2 flex-grow-1 mx-1 all-buttons"  href="mailto:dmurilloantuna@gmail.com"><i class="bi bi-envelope-fill"></i> Email</a>
                                    <a class="p-2 flex-grow-1 mx-1 all-buttons"  href="https://www.linkedin.com/in/dan-murillo"><i class="bi bi-linkedin"></i> LinkedIn </a>
                                </div>
                            </div>
                        </div>
                        <p class="text-center grayedout-text m-0">October 2023</p>
                    </div>
                    <!-- Plot container -->
                    <div class="mobile-tab mobile-tab-inactive d-none px-3" id="plot-container">
                        <!-- Mobile version no graph message -->
                        <div class="top-padding-custom" id="mobile-no-graph-message">
                            <b>Please select a filter to see a graph.</b>
                        </div>
                        <div class="d-none" id="plot-elements">
                           <!-- Breadcrumb -->
                            <div class="d-flex align-items-center py-3" id="breadcrumb"></div>
                            <!-- Plot area -->
                            <div id="plot"></div>
                            <!-- Missing values note -->
                            <div class="ghost">
                                <div class="grayedout-text" id="missingValuesNote"></div>
                            </div>
                            <!-- Legend -->
                            <div class="px-5 py-2 align-items-center justify-content-between" id="legend">
                                <div class="d-flex align-items-center">
                                    <div class="color" id="color-1"></div>
                                    <div class="legend-text">Groceries</div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <div class="color" id="color-2"></div>
                                    <div class="legend-text">Other stores</div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <div class="color" id="color-3"></div>
                                    <div class="legend-text">Eating out</div>
                                </div>
                                <div class="d-flex align-items-center">
                                    <div class="color" id="color-4"></div>
                                    <div class="legend-text">Delivery/Take-out</div>
                                </div>
                            </div>
                            <div class="pb-3" id="padder"></div>
                        </div>
                        <!-- Error messages -->
                        <div id="error-message" class="d-none py-2"><b>The filters and categories you have chosen have no data. Please try a different combination.</b></div>
                        <div id="landscape-mobile-message" class="d-none py-2"><b>Your screen is not wide enough to see the visualizations in landscape mode. Please rotate your device to portrait mode.</b> <i class="bi bi-arrow-repeat"></i></div>
                    </div>
                </div>
            </div>  
        </div>
        <script src="https://cdn.plot.ly/plotly-2.24.1.min.js" charset="utf-8"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <script src="static/js/filters.js"></script>
        <script src="static/js/plot.js"></script>
    </body>
</html>